<html>
    <head>
        <title>App 1</title>
        <script>
                document.addEventListener("fdc3Ready", () => {
                    console.log("fdc3Ready - App 1");

                    fdc3.addContextListener("fdc3.instrument", (context) => {
                        const contextField = document.getElementById("context");
                        contextField.textContent = JSON.stringify(context);
                    });

                    const broadcastButton = document.getElementById("testBroadcast");
                    if (broadcastButton){
                        broadcastButton.addEventListener("click", () => {
                            fdc3.broadcast({
                                type:"fdc3.instrument",
                                id: {
                                    ticker: "IBM"
                                }
                            });
                        });
                    }

                    const getChannelsButton = document.getElementById("testGetChannels");
                    if (getChannelsButton){
                        getChannelsButton.addEventListener("click", async () => {
                            const channels = await fdc3.getUserChannels();
                            console.log("*** got user channels", channels);
                        });
                    }

                   
                });
            
            </script>
        <script type="module" src="/src/fdc3Stub/main.ts"></script>
    </head>
    <body>
        <h1>App 1</h1>
        <p>This is a demo of a portal app</p>
        <button id="testBroadcast">broadcast</button>
        <button id="testGetChannels">get user channels</button>
        <div id="context" style="height:300px;width:300px"></div>
    </body>

</html>